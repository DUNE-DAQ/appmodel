<?xml version="1.0" encoding="ASCII"?>

<!-- oks-schema version 2.2 -->


<!DOCTYPE oks-schema [
  <!ELEMENT oks-schema (info, (include)?, (comments)?, (class)+)>
  <!ELEMENT info EMPTY>
  <!ATTLIST info
      name CDATA #IMPLIED
      type CDATA #IMPLIED
      num-of-items CDATA #REQUIRED
      oks-format CDATA #FIXED "schema"
      oks-version CDATA #REQUIRED
      created-by CDATA #IMPLIED
      created-on CDATA #IMPLIED
      creation-time CDATA #IMPLIED
      last-modified-by CDATA #IMPLIED
      last-modified-on CDATA #IMPLIED
      last-modification-time CDATA #IMPLIED
  >
  <!ELEMENT include (file)+>
  <!ELEMENT file EMPTY>
  <!ATTLIST file
      path CDATA #REQUIRED
  >
  <!ELEMENT comments (comment)+>
  <!ELEMENT comment EMPTY>
  <!ATTLIST comment
      creation-time CDATA #REQUIRED
      created-by CDATA #REQUIRED
      created-on CDATA #REQUIRED
      author CDATA #REQUIRED
      text CDATA #REQUIRED
  >
  <!ELEMENT class (superclass | attribute | relationship | method)*>
  <!ATTLIST class
      name CDATA #REQUIRED
      description CDATA ""
      is-abstract (yes|no) "no"
  >
  <!ELEMENT superclass EMPTY>
  <!ATTLIST superclass name CDATA #REQUIRED>
  <!ELEMENT attribute EMPTY>
  <!ATTLIST attribute
      name CDATA #REQUIRED
      description CDATA ""
      type (bool|s8|u8|s16|u16|s32|u32|s64|u64|float|double|date|time|string|uid|enum|class) #REQUIRED
      range CDATA ""
      format (dec|hex|oct) "dec"
      is-multi-value (yes|no) "no"
      init-value CDATA ""
      is-not-null (yes|no) "no"
      ordered (yes|no) "no"
  >
  <!ELEMENT relationship EMPTY>
  <!ATTLIST relationship
      name CDATA #REQUIRED
      description CDATA ""
      class-type CDATA #REQUIRED
      low-cc (zero|one) #REQUIRED
      high-cc (one|many) #REQUIRED
      is-composite (yes|no) #REQUIRED
      is-exclusive (yes|no) #REQUIRED
      is-dependent (yes|no) #REQUIRED
      ordered (yes|no) "no"
  >
  <!ELEMENT method (method-implementation*)>
  <!ATTLIST method
      name CDATA #REQUIRED
      description CDATA ""
  >
  <!ELEMENT method-implementation EMPTY>
  <!ATTLIST method-implementation
      language CDATA #REQUIRED
      prototype CDATA #REQUIRED
      body CDATA ""
  >
]>

<oks-schema>

<info name="" type="" num-of-items="10" oks-format="schema" oks-version="862f2957270" created-by="maroda" created-on="np04-srv-015.cern.ch" creation-time="20240701T123215" last-modified-by="maroda" last-modified-on="np04-srv-015.cern.ch" last-modification-time="20240703T085413"/>

<include>
 <file path="schema/confmodel/dunedaq.schema.xml"/>
</include>


 <class name="CTBModule" description="Top level configuration object for the CTBModule">
  <superclass name="DaqModule"/>
  <attribute name="receiver_connection_timeout" description="CTB Receiver Connection Timeout value (microseconds)" type="u64" init-value="1000" is-not-null="yes"/>
  <attribute name="control_connection_port" description="CTB Control Connection Port" type="u64" init-value="8991" is-not-null="yes"/>
  <attribute name="ctb_hostname" description="CTB Hostname" type="string" init-value="np04-ctb-1" is-not-null="yes"/>
  <attribute name="calibration_stream_output" description="CTB Calibration Stream Output Path" type="string" is-not-null="yes"/>
  <attribute name="calibration_update" description="CTB Calibration Update Interval in minutes" type="u64" init-value="5" is-not-null="yes"/>
  <attribute name="run_trigger_output" description="CTB Trigger Output Path" type="string" init-value="/nfs/sw/trigger/counters" is-not-null="yes"/>
  <relationship name="board" class-type="CTBoardConf" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
 </class>

 <class name="CTBoardConf">
  <superclass name="Jsonable"/>
  <relationship name="sockets" class-type="Sockets" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="misc" class-type="Misc" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
 </class>

 <class name="Misc">
  <attribute name="ch_status" type="bool" init-value="false" is-not-null="yes"/>
  <attribute name="standalone_enable" type="bool" init-value="false" is-not-null="yes"/>
  <relationship name="randomtrigger_1" class-type="RandomTrigger" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="randomtrigger_2" class-type="RandomTrigger" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="pulser" class-type="Pulser" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="timing" class-type="Timing" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
 </class>

 <class name="Monitor">
  <attribute name="host" type="string" init-value="localhost" is-not-null="yes"/>
  <attribute name="port" type="u64" init-value="8993" is-not-null="yes"/>
 </class>

 <class name="Pulser" description="Central Trigger Board Pulser Configuration">
  <attribute name="enable" type="bool" init-value="false" is-not-null="yes"/>
  <attribute name="frequency" type="u64" init-value="50" is-not-null="yes"/>
 </class>

 <class name="RandomTrigger">
  <attribute name="description" type="string" is-not-null="yes"/>
  <attribute name="enable" type="bool" init-value="false" is-not-null="yes"/>
  <attribute name="fixed_freq" type="bool" init-value="true" is-not-null="yes"/>
  <attribute name="beam_mode" type="bool" init-value="true" is-not-null="yes"/>
  <attribute name="period" type="u64" init-value="10000" is-not-null="yes"/>
 </class>

 <class name="Receiver" description="Central Trigger Board Receiver Socket Configuration">
  <attribute name="rollover" type="u64" init-value="125000" is-not-null="yes"/>
  <attribute name="host" type="string" init-value="localhost" is-not-null="yes"/>
  <attribute name="port" type="u64" init-value="8992" is-not-null="yes"/>
 </class>

 <class name="Sockets">
  <relationship name="receiver" class-type="Receiver" low-cc="one" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="monitor" class-type="Monitor" low-cc="zero" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
  <relationship name="statistics" class-type="Statistics" low-cc="zero" high-cc="one" is-composite="yes" is-exclusive="yes" is-dependent="yes"/>
 </class>

 <class name="Statistics">
  <attribute name="port" type="u64" init-value="8994" is-not-null="yes"/>
  <attribute name="updt_period" type="bool" init-value="1" is-not-null="yes"/>
 </class>

 <class name="Timing" description="Central Trigger Board Timing Configuration">
  <attribute name="address" type="string" init-value="0xF" is-not-null="yes"/>
  <attribute name="group" type="string" init-value="0x0" is-not-null="yes"/>
  <attribute name="triggers" type="bool" init-value="true" is-not-null="yes"/>
  <attribute name="lockout" type="string" init-value="0x10" is-not-null="yes"/>
 </class>

</oks-schema>
